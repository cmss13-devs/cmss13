<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/controller/subsystem/mapping - byond</title></head><body><header><a href="index.html">byond</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/controller/subsystem/mapping.html#var">Var Details</a> - <a href="datum/controller/subsystem/mapping.html#proc">Proc Details</a></header><main><h1>Mapping <aside>/<a href="datum.html">datum</a>/<a href="datum/controller/subsystem.html">controller/subsystem</a>/<a href="datum/controller/subsystem/mapping.html">mapping</a></aside> <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/controllers/subsystem/mapping.dm#L1"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/mapping.dm 1"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/controller/subsystem/mapping.html#var/adding_new_zlevel">adding_new_zlevel</a></th><td>True when in the process of adding a new Z-level, global locking</td></tr><tr><th><a href="datum/controller/subsystem/mapping.html#var/lists_to_reserve">lists_to_reserve</a></th><td>List of lists of turfs to reserve</td></tr><tr><th><a href="datum/controller/subsystem/mapping.html#var/loaded_lazy_templates">loaded_lazy_templates</a></th><td>list of lazy templates that have been loaded</td></tr><tr><th><a href="datum/controller/subsystem/mapping.html#var/map_templates">map_templates</a></th><td>Name of all maps</td></tr><tr><th><a href="datum/controller/subsystem/mapping.html#var/shuttle_templates">shuttle_templates</a></th><td>Name of all shuttles</td></tr><tr><th><a href="datum/controller/subsystem/mapping.html#var/tent_type_templates">tent_type_templates</a></th><td>map_id of all tents</td></tr><tr><th><a href="datum/controller/subsystem/mapping.html#var/z_list">z_list</a></th><td>list of all z level datums in the order of their z (z level 1 is at index 1, etc.)</td></tr><tr><th><a href="datum/controller/subsystem/mapping.html#var/z_trait_levels">z_trait_levels</a></th><td>list of traits and their associated z leves</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/controller/subsystem/mapping.html#proc/add_reservation_zlevel">add_reservation_zlevel</a></th><td>Adds a new reservation z level. A bit of space that can be handed out on request
Of note, reservations default to transit turfs, to make their most common use, shuttles, faster</td></tr><tr><th><a href="datum/controller/subsystem/mapping.html#proc/get_main_ship_name">get_main_ship_name</a></th><td>Gets a name for the marine ship as per the enabled ship map configuration</td></tr><tr><th><a href="datum/controller/subsystem/mapping.html#proc/initialize_reserved_level">initialize_reserved_level</a></th><td>Sets up a z level as reserved
This is not for wiping reserved levels, use wipe_reservations() for that.
If this is called after SSatom init, it will call Initialize on all turfs on the passed z, as its name promises</td></tr><tr><th><a href="datum/controller/subsystem/mapping.html#proc/manage_z_level">manage_z_level</a></th><td>Takes a z level datum, and tells the mapping subsystem to manage it
Also handles things like plane offset generation, and other things that happen on a z level to z level basis</td></tr><tr><th><a href="datum/controller/subsystem/mapping.html#proc/request_turf_block_reservation">request_turf_block_reservation</a></th><td>Requests a /datum/turf_reservation based on the given width, height, and z_size. You can specify a z_reservation to use a specific z level, or leave it null to use any z level.</td></tr><tr><th><a href="datum/controller/subsystem/mapping.html#proc/reserve_turfs">reserve_turfs</a></th><td>Schedules a group of turfs to be handed back to the reservation system's control
If await is true, will sleep until the turfs are finished work</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/adding_new_zlevel"><aside class="declaration">var </aside>adding_new_zlevel <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/controllers/subsystem/mapping.dm#L36"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/mapping.dm 36"></a></h3><p>True when in the process of adding a new Z-level, global locking</p><h3 id="var/lists_to_reserve"><aside class="declaration">var </aside>lists_to_reserve <aside>– /list</aside> <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/controllers/subsystem/mapping.dm#L23"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/mapping.dm 23"></a></h3><p>List of lists of turfs to reserve</p><h3 id="var/loaded_lazy_templates"><aside class="declaration">var </aside>loaded_lazy_templates <aside>– /list</aside> <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/controllers/subsystem/mapping.dm#L41"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/mapping.dm 41"></a></h3><p>list of lazy templates that have been loaded</p><h3 id="var/map_templates"><aside class="declaration">var </aside>map_templates <aside>– /list</aside> <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/controllers/subsystem/mapping.dm#L10"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/mapping.dm 10"></a></h3><p>Name of all maps</p><h3 id="var/shuttle_templates"><aside class="declaration">var </aside>shuttle_templates <aside>– /list</aside> <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/controllers/subsystem/mapping.dm#L12"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/mapping.dm 12"></a></h3><p>Name of all shuttles</p><h3 id="var/tent_type_templates"><aside class="declaration">var </aside>tent_type_templates <aside>– /list</aside> <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/controllers/subsystem/mapping.dm#L15"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/mapping.dm 15"></a></h3><p>map_id of all tents</p><h3 id="var/z_list"><aside class="declaration">var </aside>z_list <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/space_level.html">space_level</a></aside> <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/controllers/subsystem/mapping.dm#L31"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/mapping.dm 31"></a></h3><p>list of all z level datums in the order of their z (z level 1 is at index 1, etc.)</p><h3 id="var/z_trait_levels"><aside class="declaration">var </aside>z_trait_levels <aside>– /list</aside> <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/controllers/subsystem/mapping.dm#L38"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/mapping.dm 38"></a></h3><p>list of traits and their associated z leves</p><h2 id="proc">Proc Details</h2><h3 id="proc/add_reservation_zlevel"><aside class="declaration">proc </aside>add_reservation_zlevel<aside>(for_shuttles)  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/controllers/subsystem/mapping.dm#L327"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/mapping.dm 327"></a></aside></h3><p>Adds a new reservation z level. A bit of space that can be handed out on request
Of note, reservations default to transit turfs, to make their most common use, shuttles, faster</p><h3 id="proc/get_main_ship_name"><aside class="declaration">proc </aside>get_main_ship_name<aside>()  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/controllers/subsystem/mapping.dm#L425"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/mapping.dm 425"></a></aside></h3><p>Gets a name for the marine ship as per the enabled ship map configuration</p><h3 id="proc/initialize_reserved_level"><aside class="declaration">proc </aside>initialize_reserved_level<aside>(z)  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/controllers/subsystem/mapping.dm#L365"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/mapping.dm 365"></a></aside></h3><p>Sets up a z level as reserved
This is not for wiping reserved levels, use wipe_reservations() for that.
If this is called after SSatom init, it will call Initialize on all turfs on the passed z, as its name promises</p><h3 id="proc/manage_z_level"><aside class="declaration">proc </aside>manage_z_level<aside>(/<a href="datum.html">datum</a>/<a href="datum/space_level.html">space_level</a>/new_z, filled_with_space, contain_turfs)  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/controllers/subsystem/mapping.dm#L417"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/mapping.dm 417"></a></aside></h3><p>Takes a z level datum, and tells the mapping subsystem to manage it
Also handles things like plane offset generation, and other things that happen on a z level to z level basis</p><h3 id="proc/request_turf_block_reservation"><aside class="declaration">proc </aside>request_turf_block_reservation<aside>(width, height, z_size, z_reservation, reservation_type, turf_type_override)  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/controllers/subsystem/mapping.dm#L332"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/mapping.dm 332"></a></aside></h3><p>Requests a /datum/turf_reservation based on the given width, height, and z_size. You can specify a z_reservation to use a specific z level, or leave it null to use any z level.</p><h3 id="proc/reserve_turfs"><aside class="declaration">proc </aside>reserve_turfs<aside>(/list/turfs, await)  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/controllers/subsystem/mapping.dm#L387"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/mapping.dm 387"></a></aside></h3><p>Schedules a group of turfs to be handed back to the reservation system's control
If await is true, will sleep until the turfs are finished work</p></main><footer>colonialmarines.dme <a href="https://github.com/cmss13-devs/cmss13/tree/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9">ce4ac86</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>