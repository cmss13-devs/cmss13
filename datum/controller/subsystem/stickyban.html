<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/controller/subsystem/stickyban - byond</title></head><body><header><a href="index.html">byond</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/controller/subsystem/stickyban.html#proc">Proc Details</a></header><main><h1>Sticky Ban <aside>/<a href="datum.html">datum</a>/<a href="datum/controller/subsystem.html">controller/subsystem</a>/<a href="datum/controller/subsystem/stickyban.html">stickyban</a></aside> <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/controllers/subsystem/stickyban.dm#L1"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/stickyban.dm 1"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/controller/subsystem/stickyban.html#proc/add_matched_cid">add_matched_cid</a></th><td>Adds a CID match to the specified stickyban.</td></tr><tr><th><a href="datum/controller/subsystem/stickyban.html#proc/add_matched_ckey">add_matched_ckey</a></th><td>Adds a ckey match to the specified sticky ban.</td></tr><tr><th><a href="datum/controller/subsystem/stickyban.html#proc/add_matched_ip">add_matched_ip</a></th><td>Adds an IP match to the specified stickyban.</td></tr><tr><th><a href="datum/controller/subsystem/stickyban.html#proc/add_stickyban">add_stickyban</a></th><td>Adds a new tracked stickyban, and returns a <a href="datum/entity.html" title="/datum/entity">/datum/entity/stickyban</a> if it was successful. Blocking, sleeps.</td></tr><tr><th><a href="datum/controller/subsystem/stickyban.html#proc/check_for_sticky_ban">check_for_sticky_ban</a></th><td>Returns a list of <a href="datum.html" title="/datum">/datum/view_record/stickyban</a>s, or null, if no stickybans are found. All arguments are optional, but you should pass at least one if you want any results.</td></tr><tr><th><a href="datum/controller/subsystem/stickyban.html#proc/get_impacted_cid_records">get_impacted_cid_records</a></th><td>Returns a <a href="https://www.byond.com/docs/ref/#/list" title="/list">/list</a> of <a href="datum.html" title="/datum">/datum/view_record/stickyban_matched_cid</a> where the impacted CID matches the CID provided.
Connections matching this CID will be blocked - provided the linked stickyban is active.</td></tr><tr><th><a href="datum/controller/subsystem/stickyban.html#proc/get_impacted_ckey_records">get_impacted_ckey_records</a></th><td>Returns a <a href="https://www.byond.com/docs/ref/#/list" title="/list">/list</a> of <a href="datum.html" title="/datum">/datum/view_record/stickyban_matched_ckey</a> where the ckey provided has not been
whitelisted from the stickyban, and would be prevented from joining - provided that the stickyban itself
remains active.</td></tr><tr><th><a href="datum/controller/subsystem/stickyban.html#proc/get_impacted_ip_records">get_impacted_ip_records</a></th><td>Returns a <a href="https://www.byond.com/docs/ref/#/list" title="/list">/list</a> of <a href="datum.html" title="/datum">/datum/view_record/stickyban_matched_ip</a> where the impacted IP matches the IP provided.
Connections matchin this IP will be blocked - provided the linked stickyban is active.</td></tr><tr><th><a href="datum/controller/subsystem/stickyban.html#proc/get_whitelisted_ckey_records">get_whitelisted_ckey_records</a></th><td>Returns a <a href="https://www.byond.com/docs/ref/#/list" title="/list">/list</a> of <a href="datum.html" title="/datum">/datum/view_record/stickyban_matched_ckey</a> which have been manually whitelisted by an admin and  matches the provided existing_ban_id and key.</td></tr><tr><th><a href="datum/controller/subsystem/stickyban.html#proc/handle_old_perma">handle_old_perma</a></th><td>Imports permabans from the old ban.txt, and does <em>not</em> ban people that have been whitelisted.</td></tr><tr><th><a href="datum/controller/subsystem/stickyban.html#proc/import_sticky">import_sticky</a></th><td>Legacy import from pager bans to database bans.</td></tr><tr><th><a href="datum/controller/subsystem/stickyban.html#proc/match_sticky">match_sticky</a></th><td>Associates an existing stickyban with a new match, either of a ckey, address, or computer_id. Or all three.</td></tr><tr><th><a href="datum/controller/subsystem/stickyban.html#proc/whitelist_ckey">whitelist_ckey</a></th><td>Whitelists a specific CKEY to the specified stickyban, which will allow connection, even with matching CIDs and IPs.</td></tr></table><h2 id="proc">Proc Details</h2><h3 id="proc/add_matched_cid"><aside class="declaration">proc </aside>add_matched_cid<aside>(existing_ban_id, cid)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/controllers/subsystem/stickyban.dm#L127"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/stickyban.dm 127"></a></aside></h3><p>Adds a CID match to the specified stickyban.</p><h3 id="proc/add_matched_ckey"><aside class="declaration">proc </aside>add_matched_ckey<aside>(existing_ban_id, key)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/controllers/subsystem/stickyban.dm#L91"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/stickyban.dm 91"></a></aside></h3><p>Adds a ckey match to the specified sticky ban.</p><h3 id="proc/add_matched_ip"><aside class="declaration">proc </aside>add_matched_ip<aside>(existing_ban_id, ip)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/controllers/subsystem/stickyban.dm#L110"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/stickyban.dm 110"></a></aside></h3><p>Adds an IP match to the specified stickyban.</p><h3 id="proc/add_stickyban"><aside class="declaration">proc </aside>add_stickyban<aside>(identifier, reason, message, /<a href="datum.html">datum</a>/<a href="datum/entity.html">entity</a>/<a href="datum/entity/player.html">player</a>/banning_admin, override_date)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/controllers/subsystem/stickyban.dm#L75"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/stickyban.dm 75"></a></aside></h3><p>Adds a new tracked stickyban, and returns a <a href="datum/entity.html" title="/datum/entity">/datum/entity/stickyban</a> if it was successful. Blocking, sleeps.</p><h3 id="proc/check_for_sticky_ban"><aside class="declaration">proc </aside>check_for_sticky_ban<aside>(ckey, address, computer_id)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/controllers/subsystem/stickyban.dm#L18"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/stickyban.dm 18"></a></aside></h3><p>Returns a list of <a href="datum.html" title="/datum">/datum/view_record/stickyban</a>s, or null, if no stickybans are found. All arguments are optional, but you should pass at least one if you want any results.</p><h3 id="proc/get_impacted_cid_records"><aside class="declaration">proc </aside>get_impacted_cid_records<aside>(cid)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/controllers/subsystem/stickyban.dm#L208"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/stickyban.dm 208"></a></aside></h3><p>Returns a <a href="https://www.byond.com/docs/ref/#/list" title="/list">/list</a> of <a href="datum.html" title="/datum">/datum/view_record/stickyban_matched_cid</a> where the impacted CID matches the CID provided.
Connections matching this CID will be blocked - provided the linked stickyban is active.</p><h3 id="proc/get_impacted_ckey_records"><aside class="declaration">proc </aside>get_impacted_ckey_records<aside>(key)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/controllers/subsystem/stickyban.dm#L180"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/stickyban.dm 180"></a></aside></h3><p>Returns a <a href="https://www.byond.com/docs/ref/#/list" title="/list">/list</a> of <a href="datum.html" title="/datum">/datum/view_record/stickyban_matched_ckey</a> where the ckey provided has not been
whitelisted from the stickyban, and would be prevented from joining - provided that the stickyban itself
remains active.</p><h3 id="proc/get_impacted_ip_records"><aside class="declaration">proc </aside>get_impacted_ip_records<aside>(ip)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/controllers/subsystem/stickyban.dm#L220"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/stickyban.dm 220"></a></aside></h3><p>Returns a <a href="https://www.byond.com/docs/ref/#/list" title="/list">/list</a> of <a href="datum.html" title="/datum">/datum/view_record/stickyban_matched_ip</a> where the impacted IP matches the IP provided.
Connections matchin this IP will be blocked - provided the linked stickyban is active.</p><h3 id="proc/get_whitelisted_ckey_records"><aside class="declaration">proc </aside>get_whitelisted_ckey_records<aside>(existing_ban_id, key)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/controllers/subsystem/stickyban.dm#L193"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/stickyban.dm 193"></a></aside></h3><p>Returns a <a href="https://www.byond.com/docs/ref/#/list" title="/list">/list</a> of <a href="datum.html" title="/datum">/datum/view_record/stickyban_matched_ckey</a> which have been manually whitelisted by an admin and  matches the provided existing_ban_id and key.</p><h3 id="proc/handle_old_perma"><aside class="declaration">proc </aside>handle_old_perma<aside>(identifier, /list/ban_data)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/controllers/subsystem/stickyban.dm#L272"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/stickyban.dm 272"></a></aside></h3><p>Imports permabans from the old ban.txt, and does <em>not</em> ban people that have been whitelisted.</p><h3 id="proc/import_sticky"><aside class="declaration">proc </aside>import_sticky<aside>(identifier, /list/ban_data)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/controllers/subsystem/stickyban.dm#L226"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/stickyban.dm 226"></a></aside></h3><p>Legacy import from pager bans to database bans.</p><h3 id="proc/match_sticky"><aside class="declaration">proc </aside>match_sticky<aside>(existing_ban_id, ckey, address, computer_id)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/controllers/subsystem/stickyban.dm#L59"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/stickyban.dm 59"></a></aside></h3><p>Associates an existing stickyban with a new match, either of a ckey, address, or computer_id. Or all three.</p>
<p>Arguments:</p>
<ul>
<li>existing_ban_id, int, required</li>
<li>ckey, string, optional</li>
<li>address, string, optional</li>
<li>computer_id, string, optional</li>
</ul><h3 id="proc/whitelist_ckey"><aside class="declaration">proc </aside>whitelist_ckey<aside>(existing_ban_id, key)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/controllers/subsystem/stickyban.dm#L148"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/stickyban.dm 148"></a></aside></h3><p>Whitelists a specific CKEY to the specified stickyban, which will allow connection, even with matching CIDs and IPs.</p></main><footer>colonialmarines.dme <a href="https://github.com/cmss13-devs/cmss13/tree/1ce601c8c1c984080a82f42b65ce9ee6b48f00da">1ce601c</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>