<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/game_mode - byond</title></head><body><header><a href="index.html">byond</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/game_mode.html#var">Var Details</a> - <a href="datum/game_mode.html#proc">Proc Details</a></header><main><h1>invalid <aside>/<a href="datum.html">datum</a>/<a href="datum/game_mode.html">game_mode</a></aside> <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/datums/emergency_calls/emergency_call.dm#L8"><img src="git.png" width="16" height="16" title="code/datums/emergency_calls/emergency_call.dm 8"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/game_mode.html#var/acting_commander">acting_commander</a></th><td>The current acting commander; set by ares_command_check()</td></tr><tr><th><a href="datum/game_mode.html#var/evolution_ovipositor_threshold">evolution_ovipositor_threshold</a></th><td>Indicates when round_time_evolution_ovipositor has been passed. While FALSE, round_time_evolution_ovipositor is checked</td></tr><tr><th><a href="datum/game_mode.html#var/gear_scale">gear_scale</a></th><td>Multiplier to the amount of marine gear, current value as calculated with modifiers</td></tr><tr><th><a href="datum/game_mode.html#var/gear_scale_max">gear_scale_max</a></th><td>Multiplier to the amount of marine gear, maximum reached value for</td></tr><tr><th><a href="datum/game_mode.html#var/latejoin_larva_used">latejoin_larva_used</a></th><td>Amount of latejoin_tally already awarded as larvas</td></tr><tr><th><a href="datum/game_mode.html#var/loaded_fax_base">loaded_fax_base</a></th><td>Whether or not the fax response station has loaded.</td></tr><tr><th><a href="datum/game_mode.html#var/pred_count_modifier">pred_count_modifier</a></th><td>Modifier on predator count (adjusted via Adjust-Predator-Slots)</td></tr><tr><th><a href="datum/game_mode.html#var/pred_current_num">pred_current_num</a></th><td>How many predators utilize slots currently</td></tr><tr><th><a href="datum/game_mode.html#var/pred_per_players">pred_per_players</a></th><td>How many additional preds per client</td></tr><tr><th><a href="datum/game_mode.html#var/pred_start_count">pred_start_count</a></th><td>The initial count of predators</td></tr><tr><th><a href="datum/game_mode.html#var/role_mappings">role_mappings</a></th><td>List of role titles to override to different roles when starting game</td></tr><tr><th><a href="datum/game_mode.html#var/round_modifiers">round_modifiers</a></th><td>List of references to all non-abstract /datum/gamemode_modifiers</td></tr><tr><th><a href="datum/game_mode.html#var/round_time_evolution_ovipositor">round_time_evolution_ovipositor</a></th><td>Time for when ovipositor becomes necessary for evolution to progress.</td></tr><tr><th><a href="datum/game_mode.html#var/round_time_resin">round_time_resin</a></th><td>Time for when resin placing is allowed close to LZs</td></tr><tr><th><a href="datum/game_mode.html#var/starting_round_modifiers">starting_round_modifiers</a></th><td>List of typepaths of all /datum/gamemode_modifiers that start enabled</td></tr><tr><th><a href="datum/game_mode.html#var/taskbar_icon">taskbar_icon</a></th><td>When set and this gamemode is selected, the taskbar icon will change to the png selected here</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/game_mode.html#proc/can_start">can_start</a></th><td>can_start()
Checks to see if the game can be setup and ran with the current number of players or whatnot.</td></tr><tr><th><a href="datum/game_mode.html#proc/ds_first_drop">ds_first_drop</a></th><td>Triggered partway through the first drop, based on DROPSHIP_DROP_MSG_DELAY. Marines are underway but haven't yet landed.</td></tr><tr><th><a href="datum/game_mode.html#proc/ds_first_landed">ds_first_landed</a></th><td>Triggered when the dropship first lands.</td></tr><tr><th><a href="datum/game_mode.html#proc/get_gamemode_modifier">get_gamemode_modifier</a></th><td>Returns the state of the modifier, using its typepath</td></tr><tr><th><a href="datum/game_mode.html#proc/init_gear_scale">init_gear_scale</a></th><td>Returns a multiplier to the amount of gear that is to be distributed roundstart, stored in <a href="datum/game_mode.html#var/gear_scale" title="/datum/game_mode">/datum/game_mode/var/gear_scale</a></td></tr><tr><th><a href="datum/game_mode.html#proc/initialize_gamemode_modifiers">initialize_gamemode_modifiers</a></th><td>Sets and enables all applicable gamemode modifiers</td></tr><tr><th><a href="datum/game_mode.html#proc/latejoin_update">latejoin_update</a></th><td>Updates [var/latejoin_tally] and [var/gear_scale] based on role weights of latejoiners/cryoers. Delta is the amount of role positions added/removed</td></tr><tr><th><a href="datum/game_mode.html#proc/pick_a_lz">pick_a_lz</a></th><td>Asks the user (optional) to pick the primary LZ if both LZ1 and LZ2 exist and it hasn't been set yet
If only one, or no user, it will pick the first available</td></tr><tr><th><a href="datum/game_mode.html#proc/pick_queen_spawn">pick_queen_spawn</a></th><td>Pick and setup a queen spawn from landmarks, then spawns the player there alongside any required setup</td></tr><tr><th><a href="datum/game_mode.html#proc/post_setup">post_setup</a></th><td>post_setup()
Everyone should now be on the station and have their normal gear.  This is the place to give the special roles extra things</td></tr><tr><th><a href="datum/game_mode.html#proc/pre_setup">pre_setup</a></th><td>pre_setup()
Attempts to select players for special roles the mode might have.</td></tr><tr><th><a href="datum/game_mode.html#proc/process">process</a></th><td>process()
Called by the gameticker</td></tr><tr><th><a href="datum/game_mode.html#proc/set_gamemode_modifier">set_gamemode_modifier</a></th><td>Sets the state of the modifier, using its typepath and the state to set it to</td></tr><tr><th><a href="datum/game_mode.html#proc/setup_structures">setup_structures</a></th><td>Spawn structures relevant to the game mode setup, done before actual game setup. By default try to setup everything.</td></tr><tr><th><a href="datum/game_mode.html#proc/update_gear_scale">update_gear_scale</a></th><td>Updates the <a href="datum/game_mode.html#var/gear_scale" title="/datum/game_mode">/datum/game_mode/var/gear_scale</a> multiplier based on joining and cryoing marines</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/acting_commander"><aside class="declaration">var </aside>acting_commander <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/cm_initialize.dm#L114"><img src="git.png" width="16" height="16" title="code/game/gamemodes/cm_initialize.dm 114"></a></h3><p>The current acting commander; set by ares_command_check()</p><h3 id="var/evolution_ovipositor_threshold"><aside class="declaration">var </aside>evolution_ovipositor_threshold <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/cm_initialize.dm#L106"><img src="git.png" width="16" height="16" title="code/game/gamemodes/cm_initialize.dm 106"></a></h3><p>Indicates when round_time_evolution_ovipositor has been passed. While FALSE, round_time_evolution_ovipositor is checked</p><h3 id="var/gear_scale"><aside class="declaration">var </aside>gear_scale <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/cm_initialize.dm#L83"><img src="git.png" width="16" height="16" title="code/game/gamemodes/cm_initialize.dm 83"></a></h3><p>Multiplier to the amount of marine gear, current value as calculated with modifiers</p><h3 id="var/gear_scale_max"><aside class="declaration">var </aside>gear_scale_max <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/cm_initialize.dm#L85"><img src="git.png" width="16" height="16" title="code/game/gamemodes/cm_initialize.dm 85"></a></h3><p>Multiplier to the amount of marine gear, maximum reached value for</p><h3 id="var/latejoin_larva_used"><aside class="declaration">var </aside>latejoin_larva_used <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/cm_initialize.dm#L81"><img src="git.png" width="16" height="16" title="code/game/gamemodes/cm_initialize.dm 81"></a></h3><p>Amount of latejoin_tally already awarded as larvas</p><h3 id="var/loaded_fax_base"><aside class="declaration">var </aside>loaded_fax_base <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/game_mode.dm#L44"><img src="git.png" width="16" height="16" title="code/game/gamemodes/game_mode.dm 44"></a></h3><p>Whether or not the fax response station has loaded.</p><h3 id="var/pred_count_modifier"><aside class="declaration">var </aside>pred_count_modifier <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/cm_initialize.dm#L66"><img src="git.png" width="16" height="16" title="code/game/gamemodes/cm_initialize.dm 66"></a></h3><p>Modifier on predator count (adjusted via Adjust-Predator-Slots)</p><h3 id="var/pred_current_num"><aside class="declaration">var </aside>pred_current_num <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/cm_initialize.dm#L60"><img src="git.png" width="16" height="16" title="code/game/gamemodes/cm_initialize.dm 60"></a></h3><p>How many predators utilize slots currently</p><h3 id="var/pred_per_players"><aside class="declaration">var </aside>pred_per_players <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/cm_initialize.dm#L62"><img src="git.png" width="16" height="16" title="code/game/gamemodes/cm_initialize.dm 62"></a></h3><p>How many additional preds per client</p><h3 id="var/pred_start_count"><aside class="declaration">var </aside>pred_start_count <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/cm_initialize.dm#L64"><img src="git.png" width="16" height="16" title="code/game/gamemodes/cm_initialize.dm 64"></a></h3><p>The initial count of predators</p><h3 id="var/role_mappings"><aside class="declaration">var </aside>role_mappings <aside>– /list</aside> <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/cm_initialize.dm#L89"><img src="git.png" width="16" height="16" title="code/game/gamemodes/cm_initialize.dm 89"></a></h3><p>List of role titles to override to different roles when starting game</p><h3 id="var/round_modifiers"><aside class="declaration">var </aside>round_modifiers <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/cm_initialize.dm#L110"><img src="git.png" width="16" height="16" title="code/game/gamemodes/cm_initialize.dm 110"></a></h3><p>List of references to all non-abstract /datum/gamemode_modifiers</p><h3 id="var/round_time_evolution_ovipositor"><aside class="declaration">var </aside>round_time_evolution_ovipositor <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/cm_initialize.dm#L104"><img src="git.png" width="16" height="16" title="code/game/gamemodes/cm_initialize.dm 104"></a></h3><p>Time for when ovipositor becomes necessary for evolution to progress.</p><h3 id="var/round_time_resin"><aside class="declaration">var </aside>round_time_resin <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/cm_initialize.dm#L101"><img src="git.png" width="16" height="16" title="code/game/gamemodes/cm_initialize.dm 101"></a></h3><p>Time for when resin placing is allowed close to LZs</p><h3 id="var/starting_round_modifiers"><aside class="declaration">var </aside>starting_round_modifiers <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/cm_initialize.dm#L112"><img src="git.png" width="16" height="16" title="code/game/gamemodes/cm_initialize.dm 112"></a></h3><p>List of typepaths of all /datum/gamemode_modifiers that start enabled</p><h3 id="var/taskbar_icon"><aside class="declaration">var </aside>taskbar_icon <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/game_mode.dm#L31"><img src="git.png" width="16" height="16" title="code/game/gamemodes/game_mode.dm 31"></a></h3><p>When set and this gamemode is selected, the taskbar icon will change to the png selected here</p><h2 id="proc">Proc Details</h2><h3 id="proc/can_start"><aside class="declaration">proc </aside>can_start<aside>(bypass_checks)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/game_mode.dm#L56"><img src="git.png" width="16" height="16" title="code/game/gamemodes/game_mode.dm 56"></a></aside></h3><p>can_start()
Checks to see if the game can be setup and ran with the current number of players or whatnot.</p><h3 id="proc/ds_first_drop"><aside class="declaration">proc </aside>ds_first_drop<aside>(/<a href="obj.html">obj</a>/<a href="obj/docking_port.html">docking_port</a>/<a href="obj/docking_port/mobile.html">mobile</a>/marine_dropship)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/game_mode.dm#L86"><img src="git.png" width="16" height="16" title="code/game/gamemodes/game_mode.dm 86"></a></aside></h3><p>Triggered partway through the first drop, based on DROPSHIP_DROP_MSG_DELAY. Marines are underway but haven't yet landed.</p><h3 id="proc/ds_first_landed"><aside class="declaration">proc </aside>ds_first_landed<aside>(/<a href="obj.html">obj</a>/<a href="obj/docking_port.html">docking_port</a>/<a href="obj/docking_port/stationary.html">stationary</a>/marine_dropship)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/game_mode.dm#L90"><img src="git.png" width="16" height="16" title="code/game/gamemodes/game_mode.dm 90"></a></aside></h3><p>Triggered when the dropship first lands.</p><h3 id="proc/get_gamemode_modifier"><aside class="declaration">proc </aside>get_gamemode_modifier<aside>(modifier_typepath)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/round_modifiers.dm#L23"><img src="git.png" width="16" height="16" title="code/game/gamemodes/round_modifiers.dm 23"></a></aside></h3><p>Returns the state of the modifier, using its typepath</p><h3 id="proc/init_gear_scale"><aside class="declaration">proc </aside>init_gear_scale<aside>()  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/cm_initialize.dm#L1074"><img src="git.png" width="16" height="16" title="code/game/gamemodes/cm_initialize.dm 1074"></a></aside></h3><p>Returns a multiplier to the amount of gear that is to be distributed roundstart, stored in <a href="datum/game_mode.html#var/gear_scale" title="/datum/game_mode">/datum/game_mode/var/gear_scale</a></p><h3 id="proc/initialize_gamemode_modifiers"><aside class="declaration">proc </aside>initialize_gamemode_modifiers<aside>()  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/round_modifiers.dm#L2"><img src="git.png" width="16" height="16" title="code/game/gamemodes/round_modifiers.dm 2"></a></aside></h3><p>Sets and enables all applicable gamemode modifiers</p><h3 id="proc/latejoin_update"><aside class="declaration">proc </aside>latejoin_update<aside>(role, delta)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/cm_initialize.dm#L1107"><img src="git.png" width="16" height="16" title="code/game/gamemodes/cm_initialize.dm 1107"></a></aside></h3><p>Updates [var/latejoin_tally] and [var/gear_scale] based on role weights of latejoiners/cryoers. Delta is the amount of role positions added/removed</p><h3 id="proc/pick_a_lz"><aside class="declaration">proc </aside>pick_a_lz<aside>(/<a href="mob.html">mob</a>/user)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/cm_process.dm#L144"><img src="git.png" width="16" height="16" title="code/game/gamemodes/cm_process.dm 144"></a></aside></h3><p>Asks the user (optional) to pick the primary LZ if both LZ1 and LZ2 exist and it hasn't been set yet
If only one, or no user, it will pick the first available</p><h3 id="proc/pick_queen_spawn"><aside class="declaration">proc </aside>pick_queen_spawn<aside>(/<a href="mob.html">mob</a>/player, hivenumber) <span class="as"> as </span>/<a href="turf.html">turf</a> <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/cm_initialize.dm#L800"><img src="git.png" width="16" height="16" title="code/game/gamemodes/cm_initialize.dm 800"></a></aside></h3><p>Pick and setup a queen spawn from landmarks, then spawns the player there alongside any required setup</p><h3 id="proc/post_setup"><aside class="declaration">proc </aside>post_setup<aside>()  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/game_mode.dm#L102"><img src="git.png" width="16" height="16" title="code/game/gamemodes/game_mode.dm 102"></a></aside></h3><p>post_setup()
Everyone should now be on the station and have their normal gear.  This is the place to give the special roles extra things</p><h3 id="proc/pre_setup"><aside class="declaration">proc </aside>pre_setup<aside>()  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/game_mode.dm#L74"><img src="git.png" width="16" height="16" title="code/game/gamemodes/game_mode.dm 74"></a></aside></h3><p>pre_setup()
Attempts to select players for special roles the mode might have.</p><h3 id="proc/process"><aside class="parent"><a title="/datum" href="datum.html#proc/process">↑</a></aside>process<aside>()  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/game_mode.dm#L129"><img src="git.png" width="16" height="16" title="code/game/gamemodes/game_mode.dm 129"></a></aside></h3><p>process()
Called by the gameticker</p><h3 id="proc/set_gamemode_modifier"><aside class="declaration">proc </aside>set_gamemode_modifier<aside>(modifier_typepath, enabled)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/round_modifiers.dm#L30"><img src="git.png" width="16" height="16" title="code/game/gamemodes/round_modifiers.dm 30"></a></aside></h3><p>Sets the state of the modifier, using its typepath and the state to set it to</p><h3 id="proc/setup_structures"><aside class="declaration">proc </aside>setup_structures<aside>()  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/game_mode.dm#L96"><img src="git.png" width="16" height="16" title="code/game/gamemodes/game_mode.dm 96"></a></aside></h3><p>Spawn structures relevant to the game mode setup, done before actual game setup. By default try to setup everything.</p><h3 id="proc/update_gear_scale"><aside class="declaration">proc </aside>update_gear_scale<aside>(delta)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/game/gamemodes/cm_initialize.dm#L1091"><img src="git.png" width="16" height="16" title="code/game/gamemodes/cm_initialize.dm 1091"></a></aside></h3><p>Updates the <a href="datum/game_mode.html#var/gear_scale" title="/datum/game_mode">/datum/game_mode/var/gear_scale</a> multiplier based on joining and cryoing marines</p></main><footer>colonialmarines.dme <a href="https://github.com/cmss13-devs/cmss13/tree/1ce601c8c1c984080a82f42b65ce9ee6b48f00da">1ce601c</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>