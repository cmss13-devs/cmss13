<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/looping_sound - byond</title></head><body><header><a href="index.html">byond</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> â€” <a href="datum/looping_sound.html#var">Var Details</a> - <a href="datum/looping_sound.html#proc">Proc Details</a></header><main><h1>/<a href="datum.html">datum</a>/<a href="datum/looping_sound.html">looping_sound</a> <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L4"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 4"></a></h1><p>A datum for sounds that need to loop, with a high amount of configurability.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/looping_sound.html#var/chance">chance</a></th><td>Chance per loop to play a mid_sound.</td></tr><tr><th><a href="datum/looping_sound.html#var/direct">direct</a></th><td>If true, plays directly to provided atoms instead of from them.</td></tr><tr><th><a href="datum/looping_sound.html#var/end_sound">end_sound</a></th><td>(soundfile) The sound played after the main loop has concluded.</td></tr><tr><th><a href="datum/looping_sound.html#var/end_volume">end_volume</a></th><td>Override for volume of end sound.</td></tr><tr><th><a href="datum/looping_sound.html#var/extra_range">extra_range</a></th><td>The extra range of the sound in tiles, defaults to 0.</td></tr><tr><th><a href="datum/looping_sound.html#var/falloff_distance">falloff_distance</a></th><td>only applicable to is_sound_projecting: max range till sound volume starts dropping as distance increases</td></tr><tr><th><a href="datum/looping_sound.html#var/is_sound_projecting">is_sound_projecting</a></th><td>Let's you make a &quot;loud&quot; sound that &quot;projects.&quot; IE you can hear this sound from a further distance away.
Think of like an air raid siren. They're loud if you're close yeah... but you can hear them from mad far away, bruv
with a longer &quot;falloff distance.&quot; Fixes the extra_range stuff</td></tr><tr><th><a href="datum/looping_sound.html#var/loop_started">loop_started</a></th><td>Has the looping started yet?</td></tr><tr><th><a href="datum/looping_sound.html#var/max_loops">max_loops</a></th><td>The max amount of loops to run for.</td></tr><tr><th><a href="datum/looping_sound.html#var/mid_length">mid_length</a></th><td>The length of time to wait between playing mid_sounds.</td></tr><tr><th><a href="datum/looping_sound.html#var/mid_sounds">mid_sounds</a></th><td>(list or soundfile) Since this can be either a list or a single soundfile you can have random sounds. May contain further lists but must contain a soundfile at the end.</td></tr><tr><th><a href="datum/looping_sound.html#var/parent">parent</a></th><td>The source of the sound, or the recipient of the sound.</td></tr><tr><th><a href="datum/looping_sound.html#var/skip_starting_sounds">skip_starting_sounds</a></th><td>Do we skip the starting sounds?</td></tr><tr><th><a href="datum/looping_sound.html#var/start_length">start_length</a></th><td>How long to wait before starting the main loop after playing start_sound.</td></tr><tr><th><a href="datum/looping_sound.html#var/start_sound">start_sound</a></th><td>(soundfile) Played before starting the mid_sounds loop.</td></tr><tr><th><a href="datum/looping_sound.html#var/start_volume">start_volume</a></th><td>Override for volume of start sound.</td></tr><tr><th><a href="datum/looping_sound.html#var/timer_id">timer_id</a></th><td>The ID of the timer that's used to loop the sounds.</td></tr><tr><th><a href="datum/looping_sound.html#var/vary">vary</a></th><td>Whether or not the sounds will vary in pitch when played.</td></tr><tr><th><a href="datum/looping_sound.html#var/volume">volume</a></th><td>Sound output volume.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/looping_sound.html#proc/get_sound">get_sound</a></th><td>Returns the sound we should now be playing.</td></tr><tr><th><a href="datum/looping_sound.html#proc/handle_parent_del">handle_parent_del</a></th><td>A simple proc to handle the deletion of the parent, so that it does not force it to hard-delete.</td></tr><tr><th><a href="datum/looping_sound.html#proc/is_active">is_active</a></th><td>A simple proc that lets us know whether the sounds are currently active or not.</td></tr><tr><th><a href="datum/looping_sound.html#proc/on_start">on_start</a></th><td>A proc that's there to handle delaying the main sounds if there's a start_sound, and simply starting the sound loop in general.</td></tr><tr><th><a href="datum/looping_sound.html#proc/on_stop">on_stop</a></th><td>Simple proc that's executed when the looping sound is stopped, so that the <code>end_sound</code> can be played, if there's one.</td></tr><tr><th><a href="datum/looping_sound.html#proc/play">play</a></th><td>The proc that handles actually playing the sound.</td></tr><tr><th><a href="datum/looping_sound.html#proc/set_parent">set_parent</a></th><td>A simple proc to change who our parent is set to, also handling registering and unregistering the QDELETING signals on the parent.</td></tr><tr><th><a href="datum/looping_sound.html#proc/sound_loop">sound_loop</a></th><td>A simple proc handling the looping of the sound itself.</td></tr><tr><th><a href="datum/looping_sound.html#proc/start">start</a></th><td>The proc to actually kickstart the whole sound sequence. This is what you should call to start the <code>looping_sound</code>.</td></tr><tr><th><a href="datum/looping_sound.html#proc/start_sound_loop">start_sound_loop</a></th><td>The proc that handles starting the actual core sound loop.</td></tr><tr><th><a href="datum/looping_sound.html#proc/stop">stop</a></th><td>The proc to call to stop the sound loop.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/chance"><aside class="declaration">var </aside>chance <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L22"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 22"></a></h3><p>Chance per loop to play a mid_sound.</p><h3 id="var/direct"><aside class="declaration">var </aside>direct <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L30"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 30"></a></h3><p>If true, plays directly to provided atoms instead of from them.</p><h3 id="var/end_sound"><aside class="declaration">var </aside>end_sound <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L20"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 20"></a></h3><p>(soundfile) The sound played after the main loop has concluded.</p><h3 id="var/end_volume"><aside class="declaration">var </aside>end_volume <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L18"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 18"></a></h3><p>Override for volume of end sound.</p><h3 id="var/extra_range"><aside class="declaration">var </aside>extra_range <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L32"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 32"></a></h3><p>The extra range of the sound in tiles, defaults to 0.</p><h3 id="var/falloff_distance"><aside class="declaration">var </aside>falloff_distance <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L47"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 47"></a></h3><p>only applicable to is_sound_projecting: max range till sound volume starts dropping as distance increases</p><h3 id="var/is_sound_projecting"><aside class="declaration">var </aside>is_sound_projecting <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L45"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 45"></a></h3><p>Let's you make a &quot;loud&quot; sound that &quot;projects.&quot; IE you can hear this sound from a further distance away.
Think of like an air raid siren. They're loud if you're close yeah... but you can hear them from mad far away, bruv
with a longer &quot;falloff distance.&quot; Fixes the extra_range stuff</p><h3 id="var/loop_started"><aside class="declaration">var </aside>loop_started <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L38"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 38"></a></h3><p>Has the looping started yet?</p><h3 id="var/max_loops"><aside class="declaration">var </aside>max_loops <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L28"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 28"></a></h3><p>The max amount of loops to run for.</p><h3 id="var/mid_length"><aside class="declaration">var </aside>mid_length <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L10"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 10"></a></h3><p>The length of time to wait between playing mid_sounds.</p><h3 id="var/mid_sounds"><aside class="declaration">var </aside>mid_sounds <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L8"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 8"></a></h3><p>(list or soundfile) Since this can be either a list or a single soundfile you can have random sounds. May contain further lists but must contain a soundfile at the end.</p><h3 id="var/parent"><aside class="declaration">var </aside>parent <aside>â€“ /<a href="atom.html">atom</a></aside> <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L6"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 6"></a></h3><p>The source of the sound, or the recipient of the sound.</p><h3 id="var/skip_starting_sounds"><aside class="declaration">var </aside>skip_starting_sounds <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L36"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 36"></a></h3><p>Do we skip the starting sounds?</p><h3 id="var/start_length"><aside class="declaration">var </aside>start_length <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L16"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 16"></a></h3><p>How long to wait before starting the main loop after playing start_sound.</p><h3 id="var/start_sound"><aside class="declaration">var </aside>start_sound <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L14"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 14"></a></h3><p>(soundfile) Played before starting the mid_sounds loop.</p><h3 id="var/start_volume"><aside class="declaration">var </aside>start_volume <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L12"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 12"></a></h3><p>Override for volume of start sound.</p><h3 id="var/timer_id"><aside class="declaration">var </aside>timer_id <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L34"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 34"></a></h3><p>The ID of the timer that's used to loop the sounds.</p><h3 id="var/vary"><aside class="declaration">var </aside>vary <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L26"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 26"></a></h3><p>Whether or not the sounds will vary in pitch when played.</p><h3 id="var/volume"><aside class="declaration">var </aside>volume <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L24"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 24"></a></h3><p>Sound output volume.</p><h2 id="proc">Proc Details</h2><h3 id="proc/get_sound"><aside class="declaration">proc </aside>get_sound<aside>(_mid_sounds)  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L156"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 156"></a></aside></h3><p>Returns the sound we should now be playing.</p><h3 id="proc/handle_parent_del"><aside class="declaration">proc </aside>handle_parent_del<aside>(/<a href="datum.html">datum</a>/source)  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L187"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 187"></a></aside></h3><p>A simple proc to handle the deletion of the parent, so that it does not force it to hard-delete.</p><h3 id="proc/is_active"><aside class="declaration">proc </aside>is_active<aside>()  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L183"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 183"></a></aside></h3><p>A simple proc that lets us know whether the sounds are currently active or not.</p><h3 id="proc/on_start"><aside class="declaration">proc </aside>on_start<aside>()  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L162"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 162"></a></aside></h3><p>A proc that's there to handle delaying the main sounds if there's a start_sound, and simply starting the sound loop in general.</p><h3 id="proc/on_stop"><aside class="declaration">proc </aside>on_stop<aside>()  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L170"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 170"></a></aside></h3><p>Simple proc that's executed when the looping sound is stopped, so that the <code>end_sound</code> can be played, if there's one.</p><h3 id="proc/play"><aside class="declaration">proc </aside>play<aside>(soundfile, volume_override)  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L136"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 136"></a></aside></h3><p>The proc that handles actually playing the sound.</p>
<p>Arguments:</p>
<ul>
<li>soundfile - The soundfile we want to play.</li>
<li>volume_override - The volume we want to play the sound at, overriding the <code>volume</code> variable.</li>
</ul><h3 id="proc/set_parent"><aside class="declaration">proc </aside>set_parent<aside>(new_parent)  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L175"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 175"></a></aside></h3><p>A simple proc to change who our parent is set to, also handling registering and unregistering the QDELETING signals on the parent.</p><h3 id="proc/sound_loop"><aside class="declaration">proc </aside>sound_loop<aside>(start_time)  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L122"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 122"></a></aside></h3><p>A simple proc handling the looping of the sound itself.</p>
<p>Arguments:</p>
<ul>
<li>start_time - The time at which the <code>mid_sounds</code> started being played (so we know when to stop looping).</li>
</ul><h3 id="proc/start"><aside class="declaration">proc </aside>start<aside>(on_behalf_of)  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L87"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 87"></a></aside></h3><p>The proc to actually kickstart the whole sound sequence. This is what you should call to start the <code>looping_sound</code>.</p>
<p>Arguments:</p>
<ul>
<li>on_behalf_of - The new object to set as a parent.</li>
</ul><h3 id="proc/start_sound_loop"><aside class="declaration">proc </aside>start_sound_loop<aside>()  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L111"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 111"></a></aside></h3><p>The proc that handles starting the actual core sound loop.</p><h3 id="proc/stop"><aside class="declaration">proc </aside>stop<aside>(null_parent)  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/datums/looping_sounds/_looping_sound.dm#L100"><img src="git.png" width="16" height="16" title="code/datums/looping_sounds/_looping_sound.dm 100"></a></aside></h3><p>The proc to call to stop the sound loop.</p>
<p>Arguments:</p>
<ul>
<li>null_parent - Whether or not we should set the parent to null (useful when destroying the <code>looping_sound</code> itself). Defaults to FALSE.</li>
</ul></main><footer>colonialmarines.dme <a href="https://github.com/cmss13-devs/cmss13/tree/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9">ce4ac86</a> (master) â€” <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>