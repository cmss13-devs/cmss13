<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/surgery - byond</title></head><body><header><a href="index.html">byond</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/surgery.html#var">Var Details</a> - <a href="datum/surgery.html#proc">Proc Details</a></header><main><h1>surgery <aside>/<a href="datum.html">datum</a>/<a href="datum/surgery.html">surgery</a></aside> <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/modules/surgery/surgery_procedure.dm#L10"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_procedure.dm 10"></a></h1><p>Base surgery datum and procs. There is an important distinction between surgery datums and surgery steps.
The surgery is a separate instance for each individual operation; the steps are shared globally.
datum/surgery and datum/surgery_step are intertwined. The surgery calls the step which modifies the surgery.
Defines are in __DEFINES/human.dm and __DEFINES/surgery.dm.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/surgery.html#var/affected_limb">affected_limb</a></th><td>The limb the surgery is being performed on. If designing a surgery for a species without limbs, this var won't be usable.</td></tr><tr><th><a href="datum/surgery.html#var/invasiveness">invasiveness</a></th><td>How deep the incision must be before this operation is a valid option.</td></tr><tr><th><a href="datum/surgery.html#var/location">location</a></th><td>The location this instance of the surgery is being performed on.</td></tr><tr><th><a href="datum/surgery.html#var/lying_required">lying_required</a></th><td>Does the victim needs to be lying down? Surgeries that can be performed while standing aren't affected by the surface the patient is on.</td></tr><tr><th><a href="datum/surgery.html#var/pain_reduction_required">pain_reduction_required</a></th><td>How strong a level of anesthesia is needed to avoid risking pain causing a step to fail?</td></tr><tr><th><a href="datum/surgery.html#var/possible_locs">possible_locs</a></th><td><em>List of possible locations the surgery can be performed on. This is target zones: DEFENSE_ZONES_LIVING lists all options. ALL_LIMBS doesn't include eyes/mouth.
Note also that steps don't check this and it is possible to include a step that can't be performed on a target limb.</em></td></tr><tr><th><a href="datum/surgery.html#var/priority">priority</a></th><td>When initiating surgeries, this defines their order when listed in initiation selector or 'you can't use this tool for anything, but could x, y, or z' messages.</td></tr><tr><th><a href="datum/surgery.html#var/required_surgery_skill">required_surgery_skill</a></th><td>How much training is needed to do this surgery?</td></tr><tr><th><a href="datum/surgery.html#var/requires_bodypart">requires_bodypart</a></th><td>TRUE if the surgery requires a non-destroyed limb; FALSE if it requires a destroyed one, or doesn't need a limb.</td></tr><tr><th><a href="datum/surgery.html#var/requires_bodypart_type">requires_bodypart_type</a></th><td>Status flag(s) required on the target limb to perform an operation. NONE for any limb type. (FLAG|FLAG) is an OR check, granular this-but-not-this or this-and-this checks should be in can_start()</td></tr><tr><th><a href="datum/surgery.html#var/self_operable">self_operable</a></th><td>Can the surgery be performed on yourself?</td></tr><tr><th><a href="datum/surgery.html#var/status">status</a></th><td>The step the surgery is currently on. When status &gt; number of steps, the surgery ends.</td></tr><tr><th><a href="datum/surgery.html#var/steps">steps</a></th><td>List of steps in the surgery.</td></tr><tr><th><a href="datum/surgery.html#var/target_mobtypes">target_mobtypes</a></th><td>What species can this be performed on?</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/surgery.html#proc/attempt_next_step">attempt_next_step</a></th><td>Used on attackby and attackhand; TRUE means it stops the attack there, FALSE means it performs an item/open hand attack. CHECK OPENHAND ATTACK IS BLOCKED PROPERLY</td></tr><tr><th><a href="datum/surgery.html#proc/can_start">can_start</a></th><td>Catch-all proc for additional preconditions for starting the surgery. Return FALSE if the surgery can't be done.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/affected_limb"><aside class="declaration">var </aside>affected_limb <aside>– /<a href="obj.html">obj</a>/<a href="obj/limb.html">limb</a></aside> <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/modules/surgery/surgery_procedure.dm#L41"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_procedure.dm 41"></a></h3><p>The limb the surgery is being performed on. If designing a surgery for a species without limbs, this var won't be usable.</p><h3 id="var/invasiveness"><aside class="declaration">var </aside>invasiveness <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/modules/surgery/surgery_procedure.dm#L23"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_procedure.dm 23"></a></h3><p>How deep the incision must be before this operation is a valid option.</p><h3 id="var/location"><aside class="declaration">var </aside>location <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/modules/surgery/surgery_procedure.dm#L43"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_procedure.dm 43"></a></h3><p>The location this instance of the surgery is being performed on.</p><h3 id="var/lying_required"><aside class="declaration">var </aside>lying_required <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/modules/surgery/surgery_procedure.dm#L29"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_procedure.dm 29"></a></h3><p>Does the victim needs to be lying down? Surgeries that can be performed while standing aren't affected by the surface the patient is on.</p><h3 id="var/pain_reduction_required"><aside class="declaration">var </aside>pain_reduction_required <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/modules/surgery/surgery_procedure.dm#L33"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_procedure.dm 33"></a></h3><p>How strong a level of anesthesia is needed to avoid risking pain causing a step to fail?</p><h3 id="var/possible_locs"><aside class="declaration">var </aside>possible_locs <aside>– /list</aside> <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/modules/surgery/surgery_procedure.dm#L19"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_procedure.dm 19"></a></h3><p><em>List of possible locations the surgery can be performed on. This is target zones: DEFENSE_ZONES_LIVING lists all options. ALL_LIMBS doesn't include eyes/mouth.
Note also that steps don't check this and it is possible to include a step that can't be performed on a target limb.</em></p><h3 id="var/priority"><aside class="declaration">var </aside>priority <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/modules/surgery/surgery_procedure.dm#L13"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_procedure.dm 13"></a></h3><p>When initiating surgeries, this defines their order when listed in initiation selector or 'you can't use this tool for anything, but could x, y, or z' messages.</p><h3 id="var/required_surgery_skill"><aside class="declaration">var </aside>required_surgery_skill <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/modules/surgery/surgery_procedure.dm#L35"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_procedure.dm 35"></a></h3><p>How much training is needed to do this surgery?</p><h3 id="var/requires_bodypart"><aside class="declaration">var </aside>requires_bodypart <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/modules/surgery/surgery_procedure.dm#L27"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_procedure.dm 27"></a></h3><p>TRUE if the surgery requires a non-destroyed limb; FALSE if it requires a destroyed one, or doesn't need a limb.</p><h3 id="var/requires_bodypart_type"><aside class="declaration">var </aside>requires_bodypart_type <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/modules/surgery/surgery_procedure.dm#L25"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_procedure.dm 25"></a></h3><p>Status flag(s) required on the target limb to perform an operation. NONE for any limb type. (FLAG|FLAG) is an OR check, granular this-but-not-this or this-and-this checks should be in can_start()</p><h3 id="var/self_operable"><aside class="declaration">var </aside>self_operable <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/modules/surgery/surgery_procedure.dm#L31"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_procedure.dm 31"></a></h3><p>Can the surgery be performed on yourself?</p><h3 id="var/status"><aside class="declaration">var </aside>status <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/modules/surgery/surgery_procedure.dm#L38"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_procedure.dm 38"></a></h3><p>The step the surgery is currently on. When status &gt; number of steps, the surgery ends.</p><h3 id="var/steps"><aside class="declaration">var </aside>steps <aside>– /list</aside> <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/modules/surgery/surgery_procedure.dm#L16"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_procedure.dm 16"></a></h3><p>List of steps in the surgery.</p><h3 id="var/target_mobtypes"><aside class="declaration">var </aside>target_mobtypes <aside>– /list</aside> <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/modules/surgery/surgery_procedure.dm#L21"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_procedure.dm 21"></a></h3><p>What species can this be performed on?</p><h2 id="proc">Proc Details</h2><h3 id="proc/attempt_next_step"><aside class="declaration">proc </aside>attempt_next_step<aside>(/<a href="mob.html">mob</a>/user, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/tool, repeating)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/modules/surgery/surgery_procedure.dm#L70"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_procedure.dm 70"></a></aside></h3><p>Used on attackby and attackhand; TRUE means it stops the attack there, FALSE means it performs an item/open hand attack. CHECK OPENHAND ATTACK IS BLOCKED PROPERLY</p><h3 id="proc/can_start"><aside class="declaration">proc </aside>can_start<aside>(/<a href="mob.html">mob</a>/user, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/patient, /<a href="obj.html">obj</a>/<a href="obj/limb.html">limb</a>/L, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/tool)  <a href="https://github.com/cmss13-devs/cmss13/blob/1ce601c8c1c984080a82f42b65ce9ee6b48f00da/code/modules/surgery/surgery_procedure.dm#L65"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_procedure.dm 65"></a></aside></h3><p>Catch-all proc for additional preconditions for starting the surgery. Return FALSE if the surgery can't be done.</p></main><footer>colonialmarines.dme <a href="https://github.com/cmss13-devs/cmss13/tree/1ce601c8c1c984080a82f42b65ce9ee6b48f00da">1ce601c</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>