<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><link rel="stylesheet" href="dmdoc.css"><title>/turf - byond</title></head><body><header><a href="index.html">byond</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="turf.html#var">Var Details</a> - <a href="turf.html#proc">Proc Details</a></header><main><h1>/<a href="turf.html">turf</a><aside> inherits /<a href="atom.html">atom</a></aside> <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/game/turfs/turf.dm#L27"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 27"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="turf.html#var/can_bloody">can_bloody</a></th><td>Can blood spawn on this turf?</td></tr><tr><th><a href="turf.html#var/cleanables">cleanables</a></th><td>Associative list of cleanable types (strings) mapped to
cleanable objects</td></tr><tr><th><a href="turf.html#var/directional_opacity">directional_opacity</a></th><td>List of light sources affecting this turf.
Which directions does this turf block the vision of, taking into account both the turf's opacity and the movable opacity_sources.</td></tr><tr><th><a href="turf.html#var/dynamic_lumcount">dynamic_lumcount</a></th><td>Lumcount added by sources other than lighting datum objects, such as the overlay lighting component.</td></tr><tr><th><a href="turf.html#var/fishing_allowed">fishing_allowed</a></th><td>Is fishing allowed on this turf</td></tr><tr><th><a href="turf.html#var/hybrid_lights_affecting">hybrid_lights_affecting</a></th><td>hybrid lights affecting this turf</td></tr><tr><th><a href="turf.html#var/intact_tile">intact_tile</a></th><td>Used by floors to indicate the floor is a tile (otherwise its plating)</td></tr><tr><th><a href="turf.html#var/is_weedable">is_weedable</a></th><td>Can xenomorph weeds grow on the tile</td></tr><tr><th><a href="turf.html#var/lighting_corner_NE">lighting_corner_NE</a></th><td>Lighting Corner datums.</td></tr><tr><th><a href="turf.html#var/opacity_sources">opacity_sources</a></th><td>Lazylist of movable atoms providing opacity sources.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="turf.html#proc/GetAllTurfStrictContents">GetAllTurfStrictContents</a></th><td>Returns list of contents of a turf recursively, much like GetAllContents
We only get containing atoms in the turf, excluding multitiles bordering on it</td></tr><tr><th><a href="turf.html#proc/add_opacity_source">add_opacity_source</a></th><td>Proc to add movable sources of opacity on the turf and let it handle lighting code.</td></tr><tr><th><a href="turf.html#proc/change_area">change_area</a></th><td>Call to move a turf from its current area to a new one</td></tr><tr><th><a href="turf.html#proc/empty">empty</a></th><td>Remove all atoms except observers, landmarks, docking ports - clearing up the turf contents</td></tr><tr><th><a href="turf.html#proc/load_on_top">load_on_top</a></th><td>Places a turf on top - for map loading</td></tr><tr><th><a href="turf.html#proc/on_change_area">on_change_area</a></th><td>Allows for reactions to an area change without inherently requiring change_area() be called (I hate maploading)</td></tr><tr><th><a href="turf.html#proc/recalculate_directional_opacity">recalculate_directional_opacity</a></th><td>Calculate on which directions this turfs block view.</td></tr><tr><th><a href="turf.html#proc/reconsider_lights">reconsider_lights</a></th><td>Causes any affecting light sources to be queued for a visibility update, for example a door got opened.</td></tr><tr><th><a href="turf.html#proc/remove_opacity_source">remove_opacity_source</a></th><td>Proc to remove movable sources of opacity on the turf and let it handle lighting code.</td></tr><tr><th><a href="turf.html#proc/static_lighting_build_overlay">static_lighting_build_overlay</a></th><td>Builds a lighting object for us, but only if our area is dynamic.</td></tr><tr><th><a href="turf.html#proc/transfer_area_lighting">transfer_area_lighting</a></th><td>Transfer the lighting of one area to another</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/can_bloody"><aside class="declaration">var </aside>can_bloody <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/game/turfs/turf.dm#L34"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 34"></a></h3><p>Can blood spawn on this turf?</p><h3 id="var/cleanables"><aside class="declaration">var </aside>cleanables <aside>– /list/<a href="obj.html">obj</a>/<a href="obj/effect/decal/cleanable.html">effect/decal/cleanable</a></aside> <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/game/turfs/turf.dm#L47"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 47"></a></h3><p>Associative list of cleanable types (strings) mapped to
cleanable objects</p>
<p>The cleanable object does not necessarily need to be
on the turf, it can simply be for handling how the
overlays or placing new cleanables of the same type work</p><h3 id="var/directional_opacity"><aside class="declaration">var </aside>directional_opacity <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/game/turfs/turf.dm#L60"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 60"></a></h3><p>List of light sources affecting this turf.
Which directions does this turf block the vision of, taking into account both the turf's opacity and the movable opacity_sources.</p><h3 id="var/dynamic_lumcount"><aside class="declaration">var </aside>dynamic_lumcount <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/game/turfs/turf.dm#L56"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 56"></a></h3><p>Lumcount added by sources other than lighting datum objects, such as the overlay lighting component.</p><h3 id="var/fishing_allowed"><aside class="declaration">var </aside>fishing_allowed <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/game/turfs/turf.dm#L70"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 70"></a></h3><p>Is fishing allowed on this turf</p><h3 id="var/hybrid_lights_affecting"><aside class="declaration">var </aside>hybrid_lights_affecting <aside>– /tmp/list/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/<a href="atom/movable/lighting_mask.html">lighting_mask</a></aside> <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/game/turfs/turf.dm#L65"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 65"></a></h3><p>hybrid lights affecting this turf</p><h3 id="var/intact_tile"><aside class="declaration">var </aside>intact_tile <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/game/turfs/turf.dm#L32"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 32"></a></h3><p>Used by floors to indicate the floor is a tile (otherwise its plating)</p><h3 id="var/is_weedable"><aside class="declaration">var </aside>is_weedable <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/game/turfs/turf.dm#L73"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 73"></a></h3><p>Can xenomorph weeds grow on the tile</p><h3 id="var/lighting_corner_NE"><aside class="declaration">var </aside>lighting_corner_NE <aside>– /tmp/<a href="datum.html">datum</a>/<a href="datum/static_lighting_corner.html">static_lighting_corner</a></aside> <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/modules/lighting/lighting_static/static_lighting_turf.dm#L6"><img src="git.png" width="16" height="16" title="code/modules/lighting/lighting_static/static_lighting_turf.dm 6"></a></h3><p>Lighting Corner datums.</p><h3 id="var/opacity_sources"><aside class="declaration">var </aside>opacity_sources <aside>– /list/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a></aside> <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/game/turfs/turf.dm#L62"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 62"></a></h3><p>Lazylist of movable atoms providing opacity sources.</p><h2 id="proc">Proc Details</h2><h3 id="proc/GetAllTurfStrictContents"><aside class="declaration">proc </aside>GetAllTurfStrictContents<aside>(searchDepth, /list/toReturn)  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/__HELPERS/unsorted.dm#L578"><img src="git.png" width="16" height="16" title="code/__HELPERS/unsorted.dm 578"></a></aside></h3><p>Returns list of contents of a turf recursively, much like GetAllContents
We only get containing atoms in the turf, excluding multitiles bordering on it</p><h3 id="proc/add_opacity_source"><aside class="declaration">proc </aside>add_opacity_source<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/new_source)  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/modules/lighting/lighting_turf.dm#L52"><img src="git.png" width="16" height="16" title="code/modules/lighting/lighting_turf.dm 52"></a></aside></h3><p>Proc to add movable sources of opacity on the turf and let it handle lighting code.</p><h3 id="proc/change_area"><aside class="declaration">proc </aside>change_area<aside>(/<a href="area.html">area</a>/old_area, /<a href="area.html">area</a>/new_area)  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/game/turfs/turf.dm#L225"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 225"></a></aside></h3><p>Call to move a turf from its current area to a new one</p><h3 id="proc/empty"><aside class="declaration">proc </aside>empty<aside>(turf_type, baseturf_type, /list/ignore_typecache, flags)  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/game/turfs/turf.dm#L875"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 875"></a></aside></h3><p>Remove all atoms except observers, landmarks, docking ports - clearing up the turf contents</p><h3 id="proc/load_on_top"><aside class="declaration">proc </aside>load_on_top<aside>(/<a href="turf.html">turf</a>/added_layer, flags)  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/game/turfs/turf.dm#L845"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 845"></a></aside></h3><p>Places a turf on top - for map loading</p><h3 id="proc/on_change_area"><aside class="declaration">proc </aside>on_change_area<aside>(/<a href="area.html">area</a>/old_area, /<a href="area.html">area</a>/new_area)  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/game/turfs/turf.dm#L237"><img src="git.png" width="16" height="16" title="code/game/turfs/turf.dm 237"></a></aside></h3><p>Allows for reactions to an area change without inherently requiring change_area() be called (I hate maploading)</p><h3 id="proc/recalculate_directional_opacity"><aside class="declaration">proc </aside>recalculate_directional_opacity<aside>()  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/modules/lighting/lighting_turf.dm#L68"><img src="git.png" width="16" height="16" title="code/modules/lighting/lighting_turf.dm 68"></a></aside></h3><p>Calculate on which directions this turfs block view.</p><h3 id="proc/reconsider_lights"><aside class="declaration">proc </aside>reconsider_lights<aside>()  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/modules/lighting/lighting_turf.dm#L7"><img src="git.png" width="16" height="16" title="code/modules/lighting/lighting_turf.dm 7"></a></aside></h3><p>Causes any affecting light sources to be queued for a visibility update, for example a door got opened.</p><h3 id="proc/remove_opacity_source"><aside class="declaration">proc </aside>remove_opacity_source<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/old_source)  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/modules/lighting/lighting_turf.dm#L60"><img src="git.png" width="16" height="16" title="code/modules/lighting/lighting_turf.dm 60"></a></aside></h3><p>Proc to remove movable sources of opacity on the turf and let it handle lighting code.</p><h3 id="proc/static_lighting_build_overlay"><aside class="declaration">proc </aside>static_lighting_build_overlay<aside>(/<a href="area.html">area</a>/our_area)  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/modules/lighting/lighting_static/static_lighting_turf.dm#L16"><img src="git.png" width="16" height="16" title="code/modules/lighting/lighting_static/static_lighting_turf.dm 16"></a></aside></h3><p>Builds a lighting object for us, but only if our area is dynamic.</p><h3 id="proc/transfer_area_lighting"><aside class="declaration">proc </aside>transfer_area_lighting<aside>(/<a href="area.html">area</a>/old_area, /<a href="area.html">area</a>/new_area)  <a href="https://github.com/cmss13-devs/cmss13/blob/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9/code/modules/lighting/lighting_static/static_lighting_turf.dm#L35"><img src="git.png" width="16" height="16" title="code/modules/lighting/lighting_static/static_lighting_turf.dm 35"></a></aside></h3><p>Transfer the lighting of one area to another</p></main><footer>colonialmarines.dme <a href="https://github.com/cmss13-devs/cmss13/tree/ce4ac86508e4d56788cbf9a38fa95a3f28a3e2f9">ce4ac86</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>